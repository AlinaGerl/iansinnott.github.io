<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Use SSH ForwardAgent for fun and profit | Ian Sinnott</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Yesterday I discovered something amazing. With just one line of code you can bypass the annoyance of not being able to access private web services (i.e. GitHub) while SSHed into a machine. The method">
<meta property="og:type" content="article">
<meta property="og:title" content="Use SSH ForwardAgent for fun and profit">
<meta property="og:url" content="https://blog.iansinnott.com/use-ssh-forwardagent-for-fun-and-profit/index.html">
<meta property="og:site_name" content="Ian Sinnott">
<meta property="og:description" content="Yesterday I discovered something amazing. With just one line of code you can bypass the annoyance of not being able to access private web services (i.e. GitHub) while SSHed into a machine. The method">
<meta property="og:updated_time" content="2017-07-09T03:49:28.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Use SSH ForwardAgent for fun and profit">
<meta name="twitter:description" content="Yesterday I discovered something amazing. With just one line of code you can bypass the annoyance of not being able to access private web services (i.e. GitHub) while SSHed into a machine. The method">
  
    <link rel="alternate" href="/atom.xml" title="Ian Sinnott" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <link rel="stylesheet" href="/css/style.css">
  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-52511246-1', 'auto');
  ga('send', 'pageview');

</script>


</head>
<body>
  <div
    data-event-handler='touchstart:show'
    data-target='.hidden-nav'
    id="container">
    <div id="wrap">
      <header id='header' class='outer'>
  <nav class='left-nav'>
    <a class='main-nav-link' href='/'>
      <img src='https://dropsinn.s3.amazonaws.com/face.jpg' alt='Face image' />
      Ian Sinnott
    </a>
  </nav>
  <div class='nav-menu'>
    <nav class='hidden-nav'>
      <button
        data-event-handler='touchstart:toggle,click:toggle,touchend:preventDefault'
        data-target='.hidden-nav'
        class='toggle'>
        <div class='burger'>
          <span></span>
          <span></span>
          <span></span>
        </div>
      </button>
      <a href='/'>
        <i class="fa fa-home"></i>
        Home
      </a>
      <a href='/archives'>
        <i class="fa fa-list-ul"></i>
        Archive
      </a>
      <a href='/tags'>
        <i class="fa fa-tags"></i>
        Tags
      </a>

      <hr />

      <a href="https://www.iansinnott.com/">
        <i class="fa fa-flag"></i>
        Site
      </a>
      <a href="https://twitter.com/ian_sinn">
        <i class="fa fa-twitter"></i>
        Twitter
      </a>
      <a href="https://github.com/iansinnott">
        <i class="fa fa-github"></i>
        GitHub
      </a>

      <div class='face'>
        <img src='https://dropsinn.s3.amazonaws.com/face2.jpg' alt='Hand drawn face' />
        <h3>Hello</h3>
      </div>
    </nav>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-use-ssh-forwardagent-for-fun-and-profit" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/use-ssh-forwardagent-for-fun-and-profit/" class="article-date">
  <time datetime="2015-07-20T07:00:00.000Z" itemprop="datePublished">2015-07-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Use SSH ForwardAgent for fun and profit
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Yesterday I discovered something amazing. With just <em>one line</em> of code you can bypass the annoyance of not being able to access private web services (i.e. GitHub) while SSHed into a machine. The method is called SSH agent forwarding and it’s changed my deployment workflow.</p>
<p>Here’s the quick version. For every <code>Host</code> in your <code>~/.ssh/config</code> file you can add a new line that allows you to use your own <em>local</em> SSH keys even while SSHed into the remote server. Example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">Host myhost</div><div class="line">  HostName X.X.X.X</div><div class="line">  ForwardAgent yes # &lt;-- This line is key</div></pre></td></tr></table></figure>
<p>See that last line? That is all it takes to turn on agent forwarding whenever you SSH into the server called <code>myhost</code>. Cool right?</p>
<h3 id="The-workflow"><a href="#The-workflow" class="headerlink" title="The workflow"></a>The workflow</h3><p>So, you might be wondering why this matters. The answer is ease of deployment. For small and even mid-size projects it’s probably not too much to ask to SSH in to the actual server whenever you need to deploy new code. This may not be the best or easiest deployment workflow, but it not difficult and it’s quite simple.</p>
<p>Furthermore, if your deployment process ever breaks it will not be difficult to troubleshoot because you will understand every step as opposed to using some automated deployment method that makes everything ten times as complex.</p>
<p>Now that you have ForwardAgent turned on, you can do something like this:</p>
<ol>
<li>Change the codebase. Commit changes</li>
<li><code>git push</code></li>
<li><code>ssh</code> into production server. <code>cd</code> into app directory</li>
<li><code>git pull</code></li>
<li>Restart your app, now with up-to-date code</li>
</ol>
<p>I love this workflow, mainly because step 4 is much easier than it was before I discovered <code>ForwardAgent</code>. Since you can easily pull code from any private repo that you have SSH access to you can now use Git as your primary means of deployment.</p>
<p>Step 5 will depend on your setup and is up to you, but hopefully it’s nothing too onerous. If it is, then I suggest you check out <a href="https://www.docker.com/" target="_blank" rel="external">Docker</a>. It may just make your deployment life a whole lot better.</p>

      
    </div>
    <footer class="article-footer">
      <div class='share-menu'>
        <button class="article-share-link share-toggle">
          Share
        </button>
        <div class='share-box'>
          <input
            type='text'
            class='article-share-input'
            onfocus='this.setSelectionRange(0, this.value.length);'
            value='https://blog.iansinnott.com/use-ssh-forwardagent-for-fun-and-profit/' />
          <nav class='share-links'>
            
            <a
              href='https://twitter.com/intent/tweet?url=https%3A%2F%2Fblog.iansinnott.com%2Fuse-ssh-forwardagent-for-fun-and-profit%2F'
              target='_blank'
              class="share-link share-twitter"></a>
            <a
              href='https://www.facebook.com/sharer.php?u=https%3A%2F%2Fblog.iansinnott.com%2Fuse-ssh-forwardagent-for-fun-and-profit%2F'
              target='_blank'
              class="share-link share-facebook"></a>
            <a
              href='https://plus.google.com/share?url=https%3A%2F%2Fblog.iansinnott.com%2Fuse-ssh-forwardagent-for-fun-and-profit%2F'
              target='_blank'
              class="share-link share-google"></a>
          </nav>
        </div>
      </div>
      
        <a href="https://blog.iansinnott.com/use-ssh-forwardagent-for-fun-and-profit/#disqus_thread" class="article-comment-link">Comments</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/switching-away-from-mongoose/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Switching Away From Mongoose
        
      </div>
    </a>
  
  
    <a href="/managing-state-and-controlled-form-fields-with-react/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Managing state and controlled form fields with React</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</section>
      </div>
    </div>

    <footer id="footer">
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Ian Sinnott<br>
    </div>
  </div>
</footer>


    
    
    <script>
      var disqus_shortname = 'iansinnott';
      
      var disqus_url = 'https://blog.iansinnott.com/use-ssh-forwardagent-for-fun-and-profit/';
      
      (function() {
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    

    <script src="/js/main.js"></script>
  </div>
</body>
</html>
